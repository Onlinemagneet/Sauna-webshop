{% comment %}
  Testimonials Section - Horizontale slider met default quotes
{% endcomment %}

<section class="testimonials">
  <div class="container">
    {% if section.settings.heading != blank %}
      <div class="text-center mb-4">
        <h2 class="h2">{{ section.settings.heading }}</h2>
        {% if section.settings.subheading != blank %}
          <p class="testimonials__subheading">{{ section.settings.subheading }}</p>
        {% endif %}
      </div>
    {% endif %}
    
    <div class="testimonials__slider slider">
      <div class="slider-container">
        {% for block in section.blocks %}
          <div class="testimonial" {{ block.shopify_attributes }}>
            <div class="testimonial__content">
              {% if block.settings.quote != blank %}
                <div class="testimonial__quote">
                  {{ block.settings.quote }}
                </div>
              {% endif %}
              
              <div class="testimonial__author">
                {% if block.settings.author_image != blank %}
                  <div class="testimonial__avatar">
                    <img 
                      src="{{ block.settings.author_image | image_url: '80x' }}"
                      alt="{{ block.settings.author | escape }}"
                      loading="lazy"
                    >
                  </div>
                {% endif %}
                
                <div class="testimonial__info">
                  {% if block.settings.author != blank %}
                    <div class="testimonial__name">{{ block.settings.author }}</div>
                  {% endif %}
                  
                  {% if block.settings.meta != blank %}
                    <div class="testimonial__meta">{{ block.settings.meta }}</div>
                  {% endif %}
                  
                  {% if block.settings.rating != blank %}
                    <div class="testimonial__rating">
                      {% assign rating = block.settings.rating | times: 1 %}
                      {% for i in (1..5) %}
                        {% if i <= rating %}
                          <span class="star filled">★</span>
                        {% else %}
                          <span class="star">☆</span>
                        {% endif %}
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<style>
.testimonials {
  padding: 4rem 0;
  background: var(--bg);
}

.testimonials__subheading {
  font-size: 1.125rem;
  color: var(--muted);
  margin-top: 1rem;
}

.testimonials__slider {
  margin-top: 3rem;
}

.testimonial {
  min-width: 350px;
  max-width: 500px;
  background: white;
  border-radius: var(--radius);
  padding: 2rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  margin-right: 1rem;
}

.testimonial__quote {
  font-size: 1.125rem;
  line-height: 1.6;
  color: var(--text);
  margin-bottom: 1.5rem;
  font-style: italic;
}

.testimonial__quote p {
  margin: 0;
}

.testimonial__author {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.testimonial__avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  overflow: hidden;
  flex-shrink: 0;
}

.testimonial__avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.testimonial__name {
  font-weight: 600;
  color: var(--primary);
  margin-bottom: 0.25rem;
}

.testimonial__meta {
  font-size: 0.875rem;
  color: var(--muted);
  margin-bottom: 0.5rem;
}

.testimonial__rating {
  display: flex;
  gap: 0.25rem;
}

.star {
  color: #ddd;
  font-size: 1.25rem;
}

.star.filled {
  color: var(--highlight);
}

@media (max-width: 768px) {
  .testimonials {
    padding: 2rem 0;
  }
  
  .testimonial {
    min-width: 280px;
    padding: 1.5rem;
  }
  
  .testimonial__quote {
    font-size: 1rem;
  }
  
  .testimonial__author {
    flex-direction: column;
    text-align: center;
    gap: 0.75rem;
  }
}
</style>

{% schema %}
{
  "name": "Testimonials",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Echte mensen. Echte rust."
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Ervaringen van sporters, ouders, nachtwerkers — en iedereen die beter wil herstellen."
    }
  ],
  "blocks": [
    {
      "type": "quote",
      "name": "Testimonial",
      "settings": [
        {
          "type": "richtext",
          "id": "quote",
          "label": "Quote"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author name"
        },
        {
          "type": "text",
          "id": "meta",
          "label": "Author meta"
        },
        {
          "type": "image_picker",
          "id": "author_image",
          "label": "Author image"
        },
        {
          "type": "range",
          "id": "rating",
          "label": "Rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials",
      "blocks": [
        {
          "type": "quote",
          "settings": {
            "quote": "<p>Beste aankoop voor mijn herstelroutine. Na 15 min ben ik zen.</p>",
            "author": "Anouk",
            "meta": "Triatleet",
            "rating": 5
          }
        },
        {
          "type": "quote",
          "settings": {
            "quote": "<p>Ik slaap sneller in en word minder vaak wakker. Dit is goud.</p>",
            "author": "Jasper",
            "meta": "Vader van twee",
            "rating": 5
          }
        },
        {
          "type": "quote",
          "settings": {
            "quote": "<p>Rood licht = focus. Ochtendritueel van 8 minuten en gaan.</p>",
            "author": "Mila",
            "meta": "Founder",
            "rating": 5
          }
        }
      ]
    }
  ]
}
{% endschema %}
