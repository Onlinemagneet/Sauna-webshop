{% comment %}
  Process Steps Section - Hoe het werkt in 4 stappen
{% endcomment %}

<section class="process-steps" style="background-color: {{ section.settings.bg_color | default: 'var(--bg)' }};">
  <div class="container">
    {% if section.settings.heading != blank %}
      <div class="text-center mb-4">
        <h2 class="h2" style="color: {{ section.settings.heading_color | default: 'var(--primary)' }};">{{ section.settings.heading }}</h2>
        {% if section.settings.subheading != blank %}
          <p class="process-steps__subheading" style="color: {{ section.settings.subheading_color | default: 'var(--muted)' }};">{{ section.settings.subheading }}</p>
        {% endif %}
      </div>
    {% endif %}
    
    <div class="process-steps__timeline">
      {% for block in section.blocks %}
        <div class="process-step" {{ block.shopify_attributes }}>
          <div class="process-step__number" style="background-color: {{ block.settings.number_bg | default: 'var(--accent)' }}; color: {{ block.settings.number_color | default: 'white' }};">
            {{ forloop.index }}
          </div>
          
          <div class="process-step__content">
            {% if block.settings.icon_image != blank %}
              <div class="process-step__icon">
                <img 
                  src="{{ block.settings.icon_image | image_url: '100x' }}"
                  alt="{{ block.settings.title | escape }}"
                  loading="lazy"
                >
              </div>
            {% elsif block.settings.icon_emoji != blank %}
              <div class="process-step__icon-emoji">{{ block.settings.icon_emoji }}</div>
            {% endif %}
            
            <h3 class="process-step__title" style="color: {{ block.settings.title_color | default: 'var(--primary)' }};">
              {{ block.settings.title }}
            </h3>
            
            {% if block.settings.description != blank %}
              <p class="process-step__description" style="color: {{ block.settings.description_color | default: 'var(--muted)' }};">
                {{ block.settings.description }}
              </p>
            {% endif %}
            
            {% if block.settings.duration != blank %}
              <div class="process-step__duration" style="color: {{ block.settings.duration_color | default: 'var(--accent)' }};">
                {{ block.settings.duration }}
              </div>
            {% endif %}
            
            {% if block.settings.link_url != blank and block.settings.link_text != blank %}
              <a href="{{ block.settings.link_url }}" class="btn btn-secondary" style="border-color: {{ block.settings.link_color | default: 'var(--text)' }}; color: {{ block.settings.link_color | default: 'var(--text)' }};">
                {{ block.settings.link_text }}
              </a>
            {% endif %}
          </div>
        </div>
        
        {% unless forloop.last %}
          <div class="process-step__connector" style="background-color: {{ section.settings.connector_color | default: 'var(--muted)' }};"></div>
        {% endunless %}
      {% endfor %}
    </div>
  </div>
</section>

<style>
.process-steps {
  padding: 4rem 0;
}

.process-steps__subheading {
  font-size: 1.125rem;
  margin-top: 1rem;
}

.process-steps__timeline {
  position: relative;
  max-width: 1000px;
  margin: 3rem auto 0;
}

.process-step {
  display: flex;
  align-items: flex-start;
  gap: 2rem;
  margin-bottom: 3rem;
  position: relative;
}

.process-step__number {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  font-weight: 800;
  flex-shrink: 0;
  position: relative;
  z-index: 2;
}

.process-step__content {
  flex: 1;
  background: white;
  padding: 2rem;
  border-radius: var(--radius);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  position: relative;
}

.process-step__icon {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  overflow: hidden;
  margin-bottom: 1rem;
  background: var(--bg);
  display: flex;
  align-items: center;
  justify-content: center;
}

.process-step__icon img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.process-step__icon-emoji {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: var(--bg);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  margin-bottom: 1rem;
}

.process-step__title {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 1rem;
}

.process-step__description {
  line-height: 1.6;
  margin-bottom: 1rem;
}

.process-step__duration {
  font-weight: 600;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 1rem;
}

.process-step__connector {
  position: absolute;
  left: 30px;
  top: 60px;
  width: 2px;
  height: 3rem;
  opacity: 0.3;
}

@media (max-width: 768px) {
  .process-steps {
    padding: 2rem 0;
  }
  
  .process-step {
    flex-direction: column;
    text-align: center;
    gap: 1rem;
  }
  
  .process-step__content {
    padding: 1.5rem;
  }
  
  .process-step__connector {
    display: none;
  }
  
  .process-step__icon,
  .process-step__icon-emoji {
    width: 60px;
    height: 60px;
    margin: 0 auto 1rem;
  }
  
  .process-step__icon-emoji {
    font-size: 1.5rem;
  }
}
</style>

{% schema %}
{
  "name": "Process Steps",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Hoe het werkt"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Van bestelling tot genieten in 4 eenvoudige stappen"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#F8F9FA"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#0E0E0E"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "connector_color",
      "label": "Connector color",
      "default": "#666666"
    }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Process Step",
      "settings": [
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Kies je sauna"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Bekijk onze collectie en kies de sauna die bij jouw wensen en ruimte past."
        },
        {
          "type": "text",
          "id": "duration",
          "label": "Duration",
          "default": "5 minuten"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL"
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "Link text",
          "default": "Bekijk collectie"
        },
        {
          "type": "header",
          "content": "Icon"
        },
        {
          "type": "image_picker",
          "id": "icon_image",
          "label": "Icon image (overrides emoji)"
        },
        {
          "type": "text",
          "id": "icon_emoji",
          "label": "Icon emoji",
          "default": "üè†"
        },
        {
          "type": "header",
          "content": "Colors"
        },
        {
          "type": "color",
          "id": "number_bg",
          "label": "Number background",
          "default": "#E63946"
        },
        {
          "type": "color",
          "id": "number_color",
          "label": "Number color",
          "default": "#ffffff"
        },
        {
          "type": "color",
          "id": "title_color",
          "label": "Title color",
          "default": "#0E0E0E"
        },
        {
          "type": "color",
          "id": "description_color",
          "label": "Description color",
          "default": "#666666"
        },
        {
          "type": "color",
          "id": "duration_color",
          "label": "Duration color",
          "default": "#E63946"
        },
        {
          "type": "color",
          "id": "link_color",
          "label": "Link color",
          "default": "#111111"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Process Steps",
      "blocks": [
        {
          "type": "step",
          "settings": {
            "title": "Kies je sauna",
            "description": "Bekijk onze collectie en kies de sauna die bij jouw wensen en ruimte past.",
            "duration": "5 minuten",
            "link_text": "Bekijk collectie",
            "icon_emoji": "üè†"
          }
        },
        {
          "type": "step",
          "settings": {
            "title": "Gratis advies",
            "description": "Onze experts helpen je met de perfecte keuze en beantwoorden al je vragen.",
            "duration": "15 minuten",
            "link_text": "Plan gesprek",
            "icon_emoji": "üí¨"
          }
        },
        {
          "type": "step",
          "settings": {
            "title": "Installatie",
            "description": "Professionele installatie door onze gecertificeerde monteurs. Alles wordt perfect afgewerkt.",
            "duration": "1 dag",
            "link_text": "Bekijk proces",
            "icon_emoji": "üîß"
          }
        },
        {
          "type": "step",
          "settings": {
            "title": "Genieten",
            "description": "Tijd om te ontspannen! Je nieuwe sauna is klaar voor gebruik. Welkom bij de sauna-familie.",
            "duration": "Direct",
            "link_text": "Bekijk tips",
            "icon_emoji": "üßò"
          }
        }
      ]
    }
  ]
}
{% endschema %}
